!function(e,n){"use strict";"function"==typeof e.define&&e.define.amd?define(["d3"],function(t){n(e,t)}):n(e,e.d3)}(this,function(t,p){"use strict";function f(t,e){if(!t)throw new Error("[d3.chart] "+e)}var a=Object.hasOwnProperty;f(p,"d3.js is required"),f("string"==typeof p.version&&4<=parseInt(p.version.slice(0,1)),"d3.js version 4 or later is required");function r(t){f(t,"Layers must be initialized with a base."),this._base=t,this._handlers={}}var i=/^(enter|update|merge|exit)(:transition)?$/;function s(t){var e,n,r,i;if(!t)return t;for(n=arguments.length,e=1;e<n;e++)if(r=arguments[e])for(i in r)t[i]=r[i];return t}r.prototype.dataBind=function(){f(!1,"Layers must specify a `dataBind` method.")},r.prototype.insert=function(){f(!1,"Layers must specify an `insert` method.")},r.prototype.on=function(t,e,n){return n=n||{},f(i.test(t),"Unrecognized lifecycle event name specified to `Layer#on`: '"+t+"'."),t in this._handlers||(this._handlers[t]=[]),this._handlers[t].push({callback:e,chart:n.chart||null}),this._base},r.prototype.off=function(t,e){var n,r=this._handlers[t];if(f(i.test(t),"Unrecognized lifecycle event name specified to `Layer#off`: '"+t+"'."),!r)return this._base;if(1===arguments.length)return r.length=0,this._base;for(n=r.length-1;-1<n;--n)r[n].callback===e&&r.splice(n,1);return this._base},r.prototype.draw=function(t){var e,n,r,i,o,a,s,c;e=this.dataBind.call(this._base,t),f(e&&e.call===p.selection.prototype.call,"Invalid selection defined by `Layer#dataBind` method."),f(e.enter,"Layer selection not properly bound."),(n=e.enter())._chart=this._base._chart;for(var h=0,l=(r=[{name:"update",selection:e},{name:"enter",selection:function(){return n=this.insert.bind(n)()}},{name:"merge",selection:function(){return n.merge(e)}},{name:"exit",selection:e.exit.bind(e)}]).length;h<l;++h)if(a=r[h].name,"function"==typeof(i=r[h].selection)&&(i=i.apply(this)),!i.empty()){if(f(i&&i.call===p.selection.prototype.call,"Invalid selection defined for '"+a+"' lifecycle event."),o=this._handlers[a])for(s=0,c=o.length;s<c;++s)i._chart=o[s].chart||this._base._chart,i.call(o[s].callback);if((o=this._handlers[a+":transition"])&&o.length)for(i=i.transition(),s=0,c=o.length;s<c;++s)i._chart=o[s].chart||this._base._chart,i.call(o[s].callback)}},p.selection.prototype.layer=function(t){var e,n=new r(this);if(n.dataBind=t.dataBind,n.insert=t.insert,"events"in t)for(e in t.events)n.on(e,t.events[e]);return this.on=function(){return n.on.apply(n,arguments)},this.off=function(){return n.off.apply(n,arguments)},this.draw=function(){return n.draw.apply(n,arguments)},this};function c(t,e){this.base=t,this._layers={},this._attached={},this._events={},o.call(this,this,[e])}var o=function(t,e){var n=this.constructor,r=n.__super__;r&&o.call(r,t,e),a.call(n.prototype,"initialize")&&this.initialize.apply(t,e)},h=function(t,e){var n=this.constructor,r=n.__super__;return this===t&&a.call(this,"transform")&&(e=this.transform(e)),a.call(n.prototype,"transform")&&(e=n.prototype.transform.call(t,e)),r&&(e=h.call(r,t,e)),e};c.prototype.initialize=function(){},c.prototype.unlayer=function(t){var e=this.layer(t);return delete this._layers[t],delete e._chart,e},c.prototype.layer=function(t,e,n){var r;if(1===arguments.length)return this._layers[t];if(2===arguments.length){if("function"==typeof e.draw)return(e._chart=this)._layers[t]=e,this._layers[t];f(!1,"When reattaching a layer, the second argument must be a d3.chart layer")}return r=e.layer(n),this._layers[t]=r,e._chart=this,r},c.prototype.attach=function(t,e){return 1===arguments.length?this._attached[t]:this._attached[t]=e},c.prototype.transform=function(t){return t},c.prototype.draw=function(t){var e,n,r;for(e in t=h.call(this,this,t),this._layers)this._layers[e].draw(t);for(n in this._attached)r=this.demux?this.demux(n,t):t,this._attached[n].draw(r);this.paint()},c.prototype.paint=function(){},c.prototype.on=function(t,e,n){return(this._events[t]||(this._events[t]=[])).push({callback:e,context:n||this,_chart:this}),this},c.prototype.once=function(t,e,n){var r=this,i=function(){r.off(t,i),e.apply(this,arguments)};return this.on(t,i,n)},c.prototype.off=function(t,e,n){var r,i,o,a,s,c;if(0===arguments.length){for(t in this._events)this._events[t].length=0;return this}if(1===arguments.length)return(o=this._events[t])&&(o.length=0),this;for(r=t?[t]:Object.keys(this._events),s=0;s<r.length;s++)for(i=r[s],c=(o=this._events[i]).length;c--;)a=o[c],(e&&e===a.callback||n&&n===a.context)&&o.splice(c,1);return this},c.prototype.trigger=function(t){var e,n,r=Array.prototype.slice.call(arguments,1),i=this._events[t];if(void 0!==i)for(e=0;e<i.length;e++)(n=i[e]).callback.apply(n.context,r);return this},c.extend=function(t,e,n){var r,i=this;s(r=e&&a.call(e,"constructor")?e.constructor:function(){return i.apply(this,arguments)},i,n);function o(){this.constructor=r}return o.prototype=i.prototype,r.prototype=new o,e&&s(r.prototype,e),r.__super__=i.prototype,(c[t]=r).prototype.name=t,r},p.chart=function(t){return 0===arguments.length?c:1===arguments.length?c[t]:c.extend.apply(c,arguments)},p.selection.prototype.chart=function(t,e){if(0===arguments.length)return this._chart;var n=c[t];return f(n,"No chart registered with name '"+t+"'"),new n(this,e)},p.selection.prototype.enter.prototype.chart=function(){return this._chart},p.transition.prototype.chart=p.selection.prototype.enter.prototype.chart});
//# sourceMappingURL=d3.chart.min.js.map